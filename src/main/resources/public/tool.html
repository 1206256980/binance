<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šåŠŸèƒ½è®¡ç®—å·¥å…·ç®± - æœ€ç»ˆç¨³å®šå¸ƒå±€</title>
    <style>
        /* --- åŸºç¡€æ ·å¼ --- */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f9;
            color: #333;
            box-sizing: border-box; /* ç¡®ä¿ padding åŒ…å«åœ¨ body å®½åº¦å†… */
        }
        .container {
            width: 100%;
            margin: 0 auto;
            background: white;
            padding: 20px 20px 0 20px; /* åº•éƒ¨ä¸ç•™ padding, é—´è·ç”± tools-grid å†³å®š */
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            box-sizing: border-box;
        }
        h1 {
            color: #17a2b8;
            text-align: center;
        }

        /* --- å…³é”®å¸ƒå±€æ ·å¼ï¼šç§»é™¤ gapï¼Œä½¿ç”¨è´Ÿå¤–è¾¹è·æŠµæ¶ˆå†…éƒ¨æ¨¡å—è¾¹è· --- */
        .tools-grid {
            display: flex;
            flex-wrap: wrap;
            margin-left: -10px; /* æŠµæ¶ˆå·¦ä¾§é—´è· */
            margin-right: -10px; /* æŠµæ¶ˆå³ä¾§é—´è· */
            margin-bottom: 20px;
        }

        /* --- å·¥å…·æ¨¡å—æ ·å¼ï¼šç²¾ç¡®è®¡ç®—å®½åº¦å’Œé—´è· --- */
        .calculator-section {
            /* å…³é”®ä¿®æ”¹ 1: ä½¿ç”¨ margin æ¨¡æ‹Ÿ 10px å·¦å³é—´è·å’Œ 20px ä¸‹æ–¹é—´è· */
            margin-left: 10px;
            margin-right: 10px;
            margin-bottom: 20px;

            /* å…³é”®ä¿®æ”¹ 2: ç¡®ä¿è®¡ç®—åçš„å®½åº¦èƒ½ç¨³å®šå æ® 1/3ï¼Œå¹¶é˜»æ­¢è¢«å‹ç¼© */
            flex: 0 0 calc(33.333333% - 20px); /* å‡å» å·¦å³ 10px marginï¼Œå…± 20px */
            min-width: 280px; /* è®¾ç½®ä¸€ä¸ªåˆç†çš„æœ€å°å®½åº¦ */

            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #ffffff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            box-sizing: border-box;
        }

        .placeholder {
            border: 1px dashed #ced4da;
            background-color: #f8f9fa;
        }

        /* --- å†…éƒ¨å…ƒç´ æ ·å¼ (ä¿æŒä¸å˜) --- */
        h2 {
            color: #007bff;
            border-left: 5px solid #007bff;
            padding-left: 10px;
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        .input-group {
            margin-bottom: 10px;
        }
        .input-group label {
            display: block;
            margin-bottom: 3px;
            font-weight: bold;
            font-size: 0.9em;
        }
        .input-group input[type="number"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .result {
            margin-top: 15px;
            padding: 10px;
            background-color: #e9ecef;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-weight: bold;
            min-height: 20px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .result:hover {
            background-color: #d1e2f0;
        }
        .result span {
            color: #dc3545;
        }
        .copy-hint {
            font-size: 0.75em;
            color: #6c757d;
            margin-left: 5px;
        }

        /* å¤åˆ¶æˆåŠŸçš„æç¤º */
        #copyMessage {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #28a745;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }
        .visible {
            opacity: 1 !important;
        }
    </style>
</head>
<body>

<div class="container">

    <div id="copyMessage">âœ… å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼</div>

    <div class="tools-grid">

        <div class="calculator-section">
            <h2>1. ğŸ“ˆ ä»·æ ¼ç™¾åˆ†æ¯”å˜åŒ–</h2>
            <p style="font-size: 0.8em; color: #6c757d;">å…¬å¼ï¼š$((ç»“æŸä»· - èµ·å§‹ä»·) / èµ·å§‹ä»·) \times 100\%$</p>

            <div class="input-group">
                <label for="startPrice">èµ·å§‹ä»·ï¼š</label>
                <input type="number" id="startPrice" placeholder="å¦‚ 0.4974" oninput="calculatePercentageChange()">
            </div>

            <div class="input-group">
                <label for="endPrice">ç»“æŸä»·ï¼š</label>
                <input type="number" id="endPrice" placeholder="å¦‚ 0.5011" oninput="calculatePercentageChange()">
            </div>

            <div class="result" onclick="copyResult('percentageChangeResult')">
                å˜åŒ–ï¼š<span id="percentageChangeResult"></span>
                <span class="copy-hint">(ç‚¹å‡»å¤åˆ¶)</span>
            </div>
        </div>

        <div class="calculator-section">
            <h2>2. ğŸ’° ä»·æ ¼ç™¾åˆ†æ¯”è°ƒæ•´</h2>
            <p style="font-size: 0.8em; color: #6c757d;">å…¬å¼ï¼š$ä»·æ ¼ \times (1 + ç™¾åˆ†æ¯”)$</p>
            <p style="font-size: 0.7em; color: #6c757d;">(ç™¾åˆ†æ¯”è¯·æŒ‰æ•´æ•°è¾“å…¥ï¼Œå¦‚ 5 æˆ– -2)</p>

            <div class="input-group">
                <label for="originalPrice">è¾“å…¥ä»·æ ¼ï¼š</label>
                <input type="number" id="originalPrice" placeholder="è¯·è¾“å…¥åŸå§‹ä»·æ ¼" oninput="calculateAdjustedPrice()">
            </div>

            <div class="input-group">
                <label for="percentage">è°ƒæ•´ç™¾åˆ†æ¯” (%)ï¼š</label>
                <input type="number" id="percentage" placeholder="è¯·è¾“å…¥ç™¾åˆ†æ¯”" oninput="calculateAdjustedPrice()">
            </div>

            <div class="result" onclick="copyResult('adjustedPriceResult')">
                ç»“æœï¼š<span id="adjustedPriceResult"></span>
                <span class="copy-hint">(ç‚¹å‡»å¤åˆ¶)</span>
            </div>
        </div>

        <div class="calculator-section placeholder">
            <h2>3. âœ¨ å¾…æ·»åŠ æ–°å·¥å…·</h2>
            <p style="font-size: 0.9em; color: #6c757d; text-align: center; padding-top: 50px;">
                è¯·å‘Šè¯‰æˆ‘ä¸‹ä¸€ä¸ªå·¥å…·çš„åŠŸèƒ½ï¼Œæˆ‘å°†åœ¨è¿™é‡Œä¸ºæ‚¨å®ç°ã€‚
            </p>
        </div>
    </div>
</div>

<script>
    function calculatePercentageChange() {
        const startPrice = parseFloat(document.getElementById('startPrice').value);
        const endPrice = parseFloat(document.getElementById('endPrice').value);
        const resultElement = document.getElementById('percentageChangeResult');

        if (isNaN(startPrice) || isNaN(endPrice) || startPrice === 0) {
            resultElement.textContent = 'è¯·æ£€æŸ¥è¾“å…¥æˆ–èµ·å§‹ä»·ä¸èƒ½ä¸º 0';
            return;
        }

        const change = endPrice - startPrice;
        const percentageChange = (change / startPrice) * 100;

        resultElement.textContent = percentageChange.toFixed(4) + '%';
    }

    function calculateAdjustedPrice() {
        const originalPrice = parseFloat(document.getElementById('originalPrice').value);
        const percentage = parseFloat(document.getElementById('percentage').value);
        const resultElement = document.getElementById('adjustedPriceResult');

        if (isNaN(originalPrice) || isNaN(percentage)) {
            resultElement.textContent = 'è¯·æ£€æŸ¥è¾“å…¥';
            return;
        }

        const factor = 1 + (percentage / 100);

        const adjustedPrice = originalPrice * factor;

        resultElement.textContent = adjustedPrice.toFixed(8);
    }

    function copyResult(spanId) {
        const resultSpan = document.getElementById(spanId);
        let textToCopy = resultSpan.textContent;

        if (!textToCopy || textToCopy.includes('æ£€æŸ¥è¾“å…¥') || textToCopy.includes('Â¥')) {
            textToCopy = textToCopy.replace('Â¥', '').trim();
        }

        if (!textToCopy) return;

        navigator.clipboard.writeText(textToCopy).then(() => {
            showCopyMessage();
        }).catch(err => {
            console.error('å¤åˆ¶å¤±è´¥:', err);
            alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ï¼š' + textToCopy);
        });
    }

    function showCopyMessage() {
        const message = document.getElementById('copyMessage');
        message.classList.add('visible');

        setTimeout(() => {
            message.classList.remove('visible');
        }, 2000);
    }

    calculatePercentageChange();
    calculateAdjustedPrice();

</script>

</body>
</html>
